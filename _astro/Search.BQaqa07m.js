import{o as A}from"./index-client._mMPYeTs.js";import{l as C,h as G,f as F,i as H,t as S,j as L,g as e,a as j,p as J,b as N,s as d,d as f,m as x,c as i,r as l,u as v,e as z}from"./template.D5vFbm0L.js";import{s as O}from"./render.CseH2Ita.js";import{e as Q,i as U}from"./each.T8JlQz4m.js";import{I as w,b as X,h as Z}from"./Icon.B7EhNQ76.js";import{i as $,r as ee,a as E,s as T}from"./translation.DlgM6clf.js";import{I as B}from"./zh_TW.DR7DuOP_.js";import{u as R}from"./url-utils.CK6KrT4q.js";/* empty css                        */import"./functions.cayjvc1p.js";import"./config.4CXhSDGS.js";var ae=F(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),te=F(`<button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation rounded-lg w-11 h-11 mr-2 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel search-panel-glass fixed md:w-[30rem] w-[90vw]
top-20 left-1/2 transform -translate-x-1/2 shadow-2xl rounded-2xl p-2 z-50 svelte-gku1j3"><div id="search-bar-inside" class="flex relative transition-all items-center h-11 rounded-xl search-bar-glass svelte-gku1j3"><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               text-black/50 dark:text-white/50 svelte-gku1j3"/></div> <!></div>`,1);function ve(M,D){N(D,!1);let r=x(""),o=x([]),h=!1,c=x(!1);const re=[{url:R("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:R("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],K=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},y=(a,s)=>{const t=document.getElementById("search-panel");t&&!a&&(!e(r)||e(r).trim()==="")&&t.classList.add("float-panel-closed")},g=async(a,s)=>{if(!a){d(o,[]);return}if(e(c))try{let t=[];if(h&&window.pagefind){const n=await window.pagefind.search(a);n.results&&n.results.length>0?t=await Promise.all(n.results.map(u=>u.data())):t=[]}else t=[],console.error("Pagefind is not available in production environment.");d(o,t),y(e(o).length>0,s)}catch(t){console.error("Search error:",t),d(o,[]),y(!1)}finally{}};A(()=>{const a=()=>{d(c,!0),h=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",h),e(r)&&g(e(r),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),a()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),a()}),setTimeout(()=>{e(c)||(console.log("Fallback: Initializing search after timeout."),a())},2e3)}),C(()=>(e(c),e(r)),()=>{e(c)&&(async()=>await g(e(r),!1))()}),G(),$();var _=te(),p=H(_),V=i(p);w(V,{icon:"material-symbols:search",class:"text-[1.25rem]"}),l(p);var k=f(p,2),b=i(k),I=i(b);w(I,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var m=f(I,2);ee(m),l(b);var W=f(b,2);Q(W,1,()=>e(o),U,(a,s)=>{var t=ae(),n=i(t),u=i(n,!0),Y=f(u);w(Y,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),l(n);var P=f(n,2),q=i(P);Z(q,()=>(e(s),v(()=>e(s).excerpt))),l(P),l(t),S(()=>{T(t,"href",(e(s),v(()=>e(s).url))),O(u,(e(s),v(()=>e(s).meta.title)))}),j(a,t)}),l(k),S(a=>T(m,"placeholder",a),[()=>(z(E),z(B),v(()=>E(B.search)))]),L("click",p,K),X(m,()=>e(r),a=>d(r,a)),L("input",m,()=>g(e(r),!1)),j(M,_),J()}export{ve as default};
