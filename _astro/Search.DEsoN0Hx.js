import{o as U}from"./index-client.C1y22e1e.js";import{l as T,h as X,f as A,i as Z,t as z,g as e,j as B,a as R,p as $,b as D,s as f,d as o,m as g,c,r as d,u as b,e as F}from"./template.C2bZJiOC.js";import{s as ee}from"./render.siHIOmTY.js";import{e as ae,i as te}from"./each.CWewo_vO.js";import{I as x,b as M,h as se}from"./Icon.ljCLPJ3r.js";import{i as re,r as K,a as V,s as W}from"./translation.D_inz0NP.js";import{I as Y}from"./zh_TW.DR7DuOP_.js";import{u as q}from"./url-utils.CsHPPBr2.js";/* empty css                        */import"./functions.C_AbypFF.js";import"./config.DoqIp-RV.js";var le=A(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),ie=A(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg search-bar-glass svelte-gku1j3"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-gku1j3"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel search-panel-glass absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-gku1j3"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl search-bar-glass svelte-gku1j3"><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-gku1j3"/></div> <!></div>`,1);function xe(C,G){D(G,!1);let l=g(""),r=g(""),u=g([]),w=!1,i=g(!1);const ne=[{url:q("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:q("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],H=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},y=(a,s)=>{const t=document.getElementById("search-panel");t&&(s?a?t.classList.remove("float-panel-closed"):t.classList.add("float-panel-closed"):!a&&(!e(r)||e(r).trim()==="")&&t.classList.add("float-panel-closed"))},p=async(a,s)=>{if(!a){y(!1,s),f(u,[]);return}if(e(i))try{let t=[];if(w&&window.pagefind){const n=await window.pagefind.search(a);n.results&&n.results.length>0?t=await Promise.all(n.results.map(h=>h.data())):t=[]}else t=[],console.error("Pagefind is not available in production environment.");f(u,t),y(e(u).length>0,s)}catch(t){console.error("Search error:",t),f(u,[]),y(!1,s)}finally{}};U(()=>{const a=()=>{f(i,!0),w=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",w),e(l)&&p(e(l),!0),e(r)&&p(e(r),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),a()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),a()}),setTimeout(()=>{e(i)||(console.log("Fallback: Initializing search after timeout."),a())},2e3)}),T(()=>(e(i),e(l)),()=>{e(i)&&(async()=>await p(e(l),!0))()}),T(()=>(e(i),e(r)),()=>{e(i)&&(async()=>await p(e(r),!1))()}),X(),re();var I=ie(),_=Z(I),P=c(_);x(P,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var m=o(P,2);K(m),d(_);var v=o(_,2),J=c(v);x(J,{icon:"material-symbols:search",class:"text-[1.25rem]"}),d(v);var S=o(v,2),k=c(S),L=c(k);x(L,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var j=o(L,2);K(j),d(k);var N=o(k,2);ae(N,1,()=>e(u),te,(a,s)=>{var t=le(),n=c(t),h=c(n,!0),O=o(h);x(O,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),d(n);var E=o(n,2),Q=c(E);se(Q,()=>(e(s),b(()=>e(s).excerpt))),d(E),d(t),z(()=>{W(t,"href",(e(s),b(()=>e(s).url))),ee(h,(e(s),b(()=>e(s).meta.title)))}),R(a,t)}),d(S),z(a=>W(m,"placeholder",a),[()=>(F(V),F(Y),b(()=>V(Y.search)))]),M(m,()=>e(l),a=>f(l,a)),B("focus",m,()=>p(e(l),!0)),B("click",v,H),M(j,()=>e(r),a=>f(r,a)),R(C,I),$()}export{xe as default};
