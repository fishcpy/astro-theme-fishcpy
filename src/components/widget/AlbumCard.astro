---
import { Icon } from "astro-icon/components";

interface Props {
	album: {
		id: number;
		title: string;
		slug: string;
		description: string;
		cover: string;
		tags: string[];
		created: string;
		images: any[];
	};
	class?: string;
}

const { album, class: className } = Astro.props;
---

<a href={`/album/${album.slug}/`} 
    class="album-card group block bg-[var(--card-bg)] rounded-lg overflow-hidden shadow-sm border border-[var(--line-divider)] transition-shadow hover:shadow-md">
    <!-- 封面图片 -->
    <div class="relative aspect-[4/3] overflow-hidden">
        <img 
            src={album.cover} 
            alt={album.title}
            class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
            loading="lazy"
        />
        <!-- 图片数量标识 -->
        <div class="absolute top-3 right-3 bg-black/60 text-white px-2 py-1 rounded-full text-sm flex items-center gap-1">
            <Icon name="material-symbols:photo-camera" class="text-sm" />
            <span>{album.images.length}</span>
        </div>
    </div>
    
    <!-- 相册信息 -->
    <div class="p-4">
        <h3 class="text-lg font-bold mb-2 text-neutral-800 dark:text-neutral-200 transition-colors">
            {album.title}
        </h3>
        <p class="text-neutral-600 dark:text-neutral-400 text-sm mb-3 line-clamp-2">
            {album.description}
        </p>
        
        <!-- 标签 -->
        <div class="flex flex-wrap gap-2 mb-3">
            {album.tags.slice(0, 3).map((tag) => (
                <span class="px-2 py-1 bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 text-xs rounded">
                    {tag}
                </span>
            ))}
            {album.tags.length > 3 && (
                <span class="px-2 py-1 bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 text-xs rounded">
                    +{album.tags.length - 3}
                </span>
            )}
        </div>
        
        <!-- 创建时间 -->
        <div class="flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400">
            <Icon name="material-symbols:calendar-today" class="text-sm" />
            <span>{new Date(album.created).toLocaleDateString('zh-CN')}</span>
        </div>
    </div>
</a>

<style>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>
