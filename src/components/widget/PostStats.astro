---
import { getSortedPosts, getTagList, getCategoryList } from "@utils/content-utils";
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";

// 获取文章统计数据
const posts = await getSortedPosts();
const tags = await getTagList();
const categories = await getCategoryList();

const postCount = posts.length;
const tagCount = tags.length;
const categoryCount = categories.length;

// 计算最近30天的文章数量
const thirtyDaysAgo = new Date();
thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

const recentPostCount = posts.filter(post => {
    const publishDate = new Date(post.data.published);
    return publishDate >= thirtyDaysAgo;
}).length;
---

<div class="pb-4 card-base card-shadow onload-animation" style="animation-delay: 200ms">
    <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]">文章统计</div>
    
    <div class="px-4 overflow-hidden">
        <div class="space-y-1 text-sm">
            <div class="flex justify-between">
                <span>文章总数:</span>
                <span class="font-medium text-[var(--primary)]">{postCount}</span>
            </div>
            <div class="flex justify-between">
                <span>标签数量:</span>
                <span class="font-medium">{tagCount}</span>
            </div>
            <div class="flex justify-between">
                <span>分类数量:</span>
                <span class="font-medium">{categoryCount}</span>
            </div>
            <div class="flex justify-between">
                <span>最近30天:</span>
                <span class="font-medium text-green-600 dark:text-green-400">{recentPostCount}</span>
            </div>
        </div>
    </div>
</div>